@model Scheduler.Models.ApplicationUser
@using Scheduler.Models;
@using Microsoft.AspNet.Identity;
@{
    ApplicationDbContext db = new ApplicationDbContext();
    var user = db.Users.Find(User.Identity.GetUserId());
}

<div id="page-title" class="page-title">
    <div id="breadcrumb-text" class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        @*<div class="breadcrumb-wrap">
            <ul class="breadcrumbs">
                <li><a href="index.html">Home</a></li>
                <li>About 2</li>
            </ul>
        </div>*@
    </div>
</div>
<div id="page-default" class="clearfix" style="margin-bottom: 20px">
    <div id="primary">
        <div id="content" role="main">
            <div class="page-content">
                <article id="post-45" class="post-45 page type-page status-publish hentry">
                    <div class="entry-content">
                        <div class="row vc_row-fluid vc_custom_1433475351746">
                            <div class="cms-bg-overlay" style="">
                            </div>
                            <div class="vc_col-sm-12 wpb_column vc_column_container ">
                                <div class="wpb_wrapper">
                                    <div class="vc_custom_heading layout2" style='text-align:center'>
                                        <div class="vc_custom_heading-wrap row ">
                                            <h2>Profile Page</h2>
                                            @if (user.Id == Model.Id)
                                            {
                                                <span>[ @Html.ActionLink("Update your account information", "UpdateInformation","Manage") ]</span>
                                            }
                                        </div>
                                        <div class="custom-heading-driver layout2">
                                        </div>
                                    </div>
                                    <div class="row vc_row-fluid vc_custom_1433327225943">
                                        <div class="cms-bg-overlay" style="">
                                        </div>
                                        <div class="vc_col-sm-6 wpb_column vc_column_container ">
                                            <div class="wpb_wrapper">
                                                <div class="wpb_single_image wpb_content_element vc_align_center">
                                                    <div class="wpb_wrapper">
                                                        <div class="vc_single_image-wrapper vc_box_border_grey">
                                                            <img width="373" height="379" src="@Model.ProfilePic" class="vc_single_image-img attachment-full" alt="image-7" style="border: 1px solid #3e3e3e; box-shadow: 5px 5px 10px #888888 !important"/>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="vc_col-sm-6 wpb_column vc_column_container ">
                                            <div class="wpb_wrapper">
                                                <div class="wpb_text_column wpb_content_element ">
                                                    <div class="wpb_wrapper">
                                                        <h1 class="about-name" style="font-size: 48px; margin-bottom: 0px">@Model.FirstName.ToUpper()</h1>
                                                        <h1 class="about-name" style="font-size: 48px; margin-top: 0px">@Model.LastName.ToUpper()</h1>
                                                        <h2 class="about-regency" style="color: #696969"><i class="fa fa-envelope" style="margin-right: 5px"></i>@Model.Email</h2><br />
                                                        <h2 class="about-regency" style="color: #696969"><i class="fa fa-phone" style="margin-right: 5px"></i>@Model.PhoneNumber</h2>
                                                        <br />
                                                        <div class="about-info">
                                                            <div class="about-info-left">                                                              
                                                                <h2 class="about-regency" style="color: #29AAE3">@Model.Company</h2><br />
                                                                <span>@Model.JobTitle</span>
                                                            </div>
                                                            <div class="about-info-right" style="margin-top: 10px">
                                                                <span class="about-signature">@Model.DisplayName</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row vc_row-fluid vc_custom_1433475360243 pt30">
                            <div class="cms-bg-overlay" style="">
                            </div>
                            <div class="vc_col-sm-12 wpb_column vc_column_container" style="margin-top: 20px">
                                @if (user.Id == Model.Id)
                                {
                                    <div class="wpb_wrapper">
                                        <div class="vc_custom_heading vc_custom_1433327242675 layout2" style='text-align:center'>
                                            <div class="vc_custom_heading-wrap row ">
                                                <h2>MY STUFF</h2>
                                            </div>
                                            <div class="custom-heading-driver layout2">
                                            </div>
                                        </div>
                                        <div class="cms-fancyboxes-wraper template-cms_fancybox--layout-2 content-align-default container-fluid" id="cms-fancy-box">
                                            <div class="row cms-fancyboxes-body">
                                                <div class="cms-fancyboxes-layout-2-item col-xs-12 col-sm-6 col-md-6 col-lg-6 ">
                                                    <div class="cms-fancyboxes-layout-2-item-wrap">
                                                        <div class="fancy-box-icon">
                                                            <a href="@Url.Action("Agenda","Home")"><i class="fa fa-calendar"></i></a>
                                                        </div>
                                                        <h3 style="color: #29AAE3">NEXT ON MY SCHEDULE</h3>
                                                        <div class="fancy-box-driver">
                                                        </div>
                                                        <div class="fancy-box-content">
                                                            @if (ViewBag.UpcomingEvents.Count == 0)
                                                            {
                                                                <p>
                                                                    If you're seeing this text, that means you haven't personalized your schedule yet!  We understand you may not attend every scheduled item for <strong>@ViewBag.ChapterName (@ViewBag.ChapterYear)</strong>.  Click the calendar icon above to navigate to the agenda to pick and choose which events you will attend!
                                                                </p>
                                                            }
                                                            else
                                                            {
                                                                int count = 0;
                                                                foreach (var item in ViewBag.UpcomingEvents)
                                                                {
                                                                    <div class="cms-fancyboxes-vertical-item-desc">
                                                                        <h4><strong>@item.Description.ToUpper()</strong></h4>
                                                                        <div class="fancy-box-content">
                                                                            <p>@item.StartTime.ToShortTimeString() - @item.EndTime.ToShortTimeString()</p>
                                                                        </div>
                                                                    </div>
                                                                    count++;
                                                                    if (count == 3) { break; };
                                                                }
                                                                <p><em>Only shows up to the next 3 events on your schedule.  Click the calendar icon above to add more events.</em></p>
                                                            }

                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="cms-fancyboxes-layout-2-item col-xs-12 col-sm-6 col-md-6 col-lg-6 ">
                                                    <div class="cms-fancyboxes-layout-2-item-wrap">
                                                        <div class="fancy-box-icon">
                                                            <a href="@Url.Action("Notes","Home")"><i class="fa fa-sticky-note"></i></a>
                                                        </div>
                                                        <h3 style="color: #29AAE3">MY NOTES</h3>
                                                        <div class="fancy-box-driver">
                                                        </div>
                                                        <div class="fancy-box-content">
                                                            <p>
                                                                Click on the sticky note icon above to navigate to your notes, where you're free to jot down as many notes as you'd like while attending <strong>@ViewBag.ChapterName (@ViewBag.ChapterYear)</strong>.  Hear something interesting that could benefit you?  Make a note for later so you don't forget!
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                                @*<div class="cms-fancyboxes-layout-2-item col-xs-12 col-sm-4 col-md-4 col-lg-4 ">
                                                    <div class="cms-fancyboxes-layout-2-item-wrap">
                                                        <div class="fancy-box-icon">
                                                            <a href="#"><i class="fa fa-check"></i></a>
                                                        </div>
                                                        <h3>ideas</h3>
                                                        <div class="fancy-box-driver">
                                                        </div>
                                                        <div class="fancy-box-content">
                                                            <p>
                                                                The copy warned the Little Blind Text, that where it came from it would have been rewritten a thousand times.
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>*@
                                            </div>
                                        </div>
                                    </div>
                                }
                            </div>
                        </div>

                        @*<div class="row vc_row-fluid vc_custom_1433475367406" style="position:relative;">
                            <div class="cms-bg-overlay" style="position:absolute; top:0; left:0; right:0; bottom:0;background:rgba(255,255,255,0.6);">
                            </div>
                            <div class="vc_col-sm-12 wpb_column vc_column_container ">
                                <div class="wpb_wrapper">
                                    <div class="cms-carousel-layout-clients">
                                        <h2>our happy clients</h2>
                                        <div class="cms-carousel template-cms_carousel--layout-clients owl-carousel owl-theme owl-loaded" id="cms-carousel">
                                            <div class="owl-stage-outer">
                                                <div class="owl-stage" style="transform: translate3d(0px, 0px, 0px); transition: 1s; width: 2640px;">
                                                    <div class="owl-item cloned" style="width: 106px; margin-right: 70px;">
                                                        <div class="cms-clients-item ">
                                                            <div class="cms-clients-item-wrap">
                                                                <img width="104" height="30" src="~/assets/upload/client-51.png" class="attachment-medium-rectangle wp-post-image" alt="client-5">
                                                            </div>
                                                        </div>
                                                    </div><div class="owl-item cloned" style="width: 106px; margin-right: 70px;">
                                                        <div class="cms-clients-item ">
                                                            <div class="cms-clients-item-wrap">
                                                                <img width="97" height="30" src="~/assets/upload/client-411.png" class="attachment-medium-rectangle wp-post-image" alt="client-41">
                                                            </div>
                                                        </div>
                                                    </div><div class="owl-item cloned" style="width: 106px; margin-right: 70px;">
                                                        <div class="cms-clients-item ">
                                                            <div class="cms-clients-item-wrap">
                                                                <img width="88" height="30" src="~/assets/upload/client-21.png" class="attachment-medium-rectangle wp-post-image" alt="client-2">
                                                            </div>
                                                        </div>
                                                    </div><div class="owl-item cloned" style="width: 106px; margin-right: 70px;">
                                                        <div class="cms-clients-item ">
                                                            <div class="cms-clients-item-wrap">
                                                                <img width="102" height="30" src="~/assets/upload/client-31.png" class="attachment-medium-rectangle wp-post-image" alt="client-3">
                                                            </div>
                                                        </div>
                                                    </div><div class="owl-item cloned" style="width: 106px; margin-right: 70px;">
                                                        <div class="cms-clients-item ">
                                                            <div class="cms-clients-item-wrap">
                                                                <img width="73" height="30" src="~/assets/upload/client-11.png" class="attachment-medium-rectangle wp-post-image" alt="client-1">
                                                            </div>
                                                        </div>
                                                    </div><div class="owl-item active" style="width: 106px; margin-right: 70px;">
                                                        <div class="cms-clients-item ">
                                                            <div class="cms-clients-item-wrap">
                                                                <img width="104" height="30" src="~/assets/upload/client-51.png" class="attachment-medium-rectangle wp-post-image" alt="client-5">
                                                            </div>
                                                        </div>
                                                    </div><div class="owl-item active" style="width: 106px; margin-right: 70px;">
                                                        <div class="cms-clients-item ">
                                                            <div class="cms-clients-item-wrap">
                                                                <img width="97" height="30" src="~/assets/upload/client-411.png" class="attachment-medium-rectangle wp-post-image" alt="client-41">
                                                            </div>
                                                        </div>
                                                    </div><div class="owl-item active" style="width: 106px; margin-right: 70px;">
                                                        <div class="cms-clients-item ">
                                                            <div class="cms-clients-item-wrap">
                                                                <img width="88" height="30" src="~/assets/upload/client-21.png" class="attachment-medium-rectangle wp-post-image" alt="client-2">
                                                            </div>
                                                        </div>
                                                    </div><div class="owl-item active" style="width: 106px; margin-right: 70px;">
                                                        <div class="cms-clients-item ">
                                                            <div class="cms-clients-item-wrap">
                                                                <img width="102" height="30" src="~/assets/upload/client-31.png" class="attachment-medium-rectangle wp-post-image" alt="client-3">
                                                            </div>
                                                        </div>
                                                    </div><div class="owl-item active" style="width: 106px; margin-right: 70px;">
                                                        <div class="cms-clients-item ">
                                                            <div class="cms-clients-item-wrap">
                                                                <img width="73" height="30" src="~/assets/upload/client-11.png" class="attachment-medium-rectangle wp-post-image" alt="client-1">
                                                            </div>
                                                        </div>
                                                    </div><div class="owl-item cloned" style="width: 106px; margin-right: 70px;">
                                                        <div class="cms-clients-item ">
                                                            <div class="cms-clients-item-wrap">
                                                                <img width="104" height="30" src="~/assets/upload/client-51.png" class="attachment-medium-rectangle wp-post-image" alt="client-5">
                                                            </div>
                                                        </div>
                                                    </div><div class="owl-item cloned" style="width: 106px; margin-right: 70px;">
                                                        <div class="cms-clients-item ">
                                                            <div class="cms-clients-item-wrap">
                                                                <img width="97" height="30" src="~/assets/upload/client-411.png" class="attachment-medium-rectangle wp-post-image" alt="client-41">
                                                            </div>
                                                        </div>
                                                    </div><div class="owl-item cloned" style="width: 106px; margin-right: 70px;">
                                                        <div class="cms-clients-item ">
                                                            <div class="cms-clients-item-wrap">
                                                                <img width="88" height="30" src="~/assets/upload/client-21.png" class="attachment-medium-rectangle wp-post-image" alt="client-2">
                                                            </div>
                                                        </div>
                                                    </div><div class="owl-item cloned" style="width: 106px; margin-right: 70px;">
                                                        <div class="cms-clients-item ">
                                                            <div class="cms-clients-item-wrap">
                                                                <img width="102" height="30" src="~/assets/upload/client-31.png" class="attachment-medium-rectangle wp-post-image" alt="client-3">
                                                            </div>
                                                        </div>
                                                    </div><div class="owl-item cloned" style="width: 106px; margin-right: 70px;">
                                                        <div class="cms-clients-item ">
                                                            <div class="cms-clients-item-wrap">
                                                                <img width="73" height="30" src="~/assets/upload/client-11.png" class="attachment-medium-rectangle wp-post-image" alt="client-1">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div><div class="owl-controls"><div class="owl-nav"><div class="owl-prev" style="display: none;"><i class="fa fa-arrow-left"></i></div><div class="owl-next" style="display: none;"><i class="fa fa-arrow-right"></i></div></div><div class="owl-dots" style="display: none;"></div></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>*@
                        @*<div class="row vc_row-fluid vc_custom_1433475367406" style="position:relative;">
                            <div class="cms-bg-overlay" style="position:absolute; top:0; left:0; right:0; bottom:0;background:rgba(255,255,255,0.6);">
                            </div>
                            <div class="vc_col-sm-12 wpb_column vc_column_container ">
                                <div class="wpb_wrapper">
                                    <div class="cms-carousel-layout-clients">
                                        <h2>our happy clients</h2>
                                        <div class="cms-carousel template-cms_carousel--layout-clients" id="cms-carousel">
                                            <div class="cms-clients-item">
                                                <div class="cms-clients-item-wrap">
                                                    <img width="104" height="30" src="~/assets/upload/client-51.png" class="attachment-medium-rectangle wp-post-image" alt="client-5" />
                                                </div>
                                            </div>
                                            <div class="cms-clients-item">
                                                <div class="cms-clients-item-wrap">
                                                    <img width="97" height="30" src="~/assets/upload/client-411.png" class="attachment-medium-rectangle wp-post-image" alt="client-41" />
                                                </div>
                                            </div>
                                            <div class="cms-clients-item">
                                                <div class="cms-clients-item-wrap">
                                                    <img width="88" height="30" src="~/assets/upload/client-21.png" class="attachment-medium-rectangle wp-post-image" alt="client-2" />
                                                </div>
                                            </div>
                                            <div class="cms-clients-item">
                                                <div class="cms-clients-item-wrap">
                                                    <img width="102" height="30" src="~/assets/upload/client-31.png" class="attachment-medium-rectangle wp-post-image" alt="client-3" />
                                                </div>
                                            </div>
                                            <div class="cms-clients-item">
                                                <div class="cms-clients-item-wrap">
                                                    <img width="73" height="30" src="~/assets/upload/client-11.png" class="attachment-medium-rectangle wp-post-image" alt="client-1" />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>*@
                    </div>
                    <!-- .entry-content -->
                </article>
                <!-- #post -->
                <div id="comments" class="comments-area">
                </div>
                <!-- #comments .comments-area -->
            </div>
        </div>
        <!-- #content -->
    </div>
    <!-- #primary -->
</div>
<div class="modal fade" id="photoModal" tabindex="-1" role="dialog" aria-labelledby="photoModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header" style="margin-bottom: 15px">
                <button type="button" class="close pull-right" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h3 class="modal-title" id="phototModalLabel" style="color: #29AAE3">Upload New Photo</h3>
            </div>
            @using (Html.BeginForm("AddPhoto", "Home", new { }, FormMethod.Post, new { enctype = "multipart/form-data" }))
            {
                @Html.AntiForgeryToken()
                <div class="modal-body">
                    <div class="" style="">
                        <div class="form-group">
                            <input type="file" name="image" id="image" required />
                            <br /><br />
                            <textarea class="form-control" name="Caption" id="Caption" placeholder="caption..." rows="3"></textarea>
                        </div>
                    </div>
                </div>
                <div class="modal-footer" style="margin-top: 20px">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button id="" type="submit" class="btn btn-theme play">Confirm</button>
                </div>
            }
        </div>
    </div>
</div>
@if (user.Id == Model.Id)
{
    <div id="page-title" class="page-title">
        @*<div id="page-title-text" class="col-xs-12 col-sm-12 col-md-12 col-lg-12" style='background:url(upload/page_title1.jpg) no-repeat center'>
            <h1>Portfolio 1</h1>
            <div class="page-title-driver">
            </div>
            <p class="page-sub-title">
                We can help you strenghten your business
            </p>
        </div>*@
        <div id="breadcrumb-text" class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <h2 style="padding-left: 30px; padding-right: 30px; padding-top: 12px"><span class="pull-left">MY GALLERY</span><button class="btn btn-theme btn-md pull-right" data-toggle="modal" data-target="#photoModal" style="margin-top: -7px">+ New Photo</button></h2>
            <em class="pull-left" style="color: #29AAE3; padding-left: 30px; padding-top: 3px; padding-right: 30px">Please be aware that some of your photos might be chosen to be displayed in the main gallery on the home page.</em>
            <br /><br />
            <hr style="margin-top: 0px; margin-left: 30px; margin-right: 30px" />
        </div>
    </div>
    <!-- #page-title -->
    if (ViewBag.Photos.Count > 0)
    {
        <div id="page-default" class="clearfix">
            <div id="primary">
                <div id="content" role="main">
                    <div class="page-content">
                        <article id="post-31" class="post-31 page type-page status-publish hentry">
                            <div class="entry-content">
                                <div class="row vc_row-fluid vc_custom_1435184386673">
                                    <div class="cms-bg-overlay" style="">
                                    </div>
                                    <div class="vc_col-sm-12 wpb_column vc_column_container ">
                                        <div class="wpb_wrapper">
                                            <div class="cms-grid-wraper template-cms_grid--portfolio " id="cms-grid">
                                                <div class="cms-grid-filter">
                                                    <ul class="cms-filter-category">
                                                        <li>
                                                            <a class="active" href="#" data-group="all">All</a>
                                                        </li>
                                                        @foreach (var chapter in ViewBag.Chapters)
                                                        {
                                                            <li>
                                                                <a href="#" data-group="@string.Format("{0}{1}{2}{3}{4}", chapter.ChapterName, "-", chapter.ChapterYear, "-", chapter.Id)">
                                                                    @chapter.ChapterName (@chapter.ChapterYear)
                                                                </a>
                                                            </li>
                                                        }   
                                                    </ul>
                                                </div>
                                                <div class="row cms-grid cms-grid-portfolio cms-grid cms-grid-masonry">
                                                    @foreach (var photo in ViewBag.Photos)
                                                    {
                                                        <div class="cms-grid-item cms-grid-item col-lg-4 col-md-4 col-sm-6 col-xs-12" data-groups='["all",@string.Format("{0}{1}{2}{3}{4}{5}{6}", '"', photo.Chapter.ChapterName, "-", photo.Chapter.ChapterYear, "-", photo.ChapterId, '"')]'>
                                                            <div class="cms-grid-item-wrap">
                                                                <div class="cms-grid-media has-thumbnail">
                                                                    <img width="600" height="600" src="@photo.File" class="attachment-medium-square wp-post-image" alt="@photo.File" style="border: 1px solid #e5e5e5; box-shadow: 3px 3px 5px #888888 !important"/>
                                                                </div>
                                                                <div class="cms-grid-item-icon">
                                                                    <a class="cms-grid-portfolio-item-lightbox" title="@if (photo.Caption != null){@photo.Caption <br />}<em>Posted on @photo.Created.ToString("G")</em>" href="@photo.File" style="margin-left: -40px"><i class="fa fa-search"></i></a>
                                                                    <a class="cms-grid-portfolio-item-link" href="@Url.Action("DeletePhoto","Home", new {id = photo.Id })" style="margin-left: 40px"><i class="fa fa-trash"></i></a>
                                                                    <a class="" href="@Url.Action("EditPhoto","Home", new {id = photo.Id })" ><i class="fa fa-edit"></i></a>
                                                                </div>
                                                                <div class="cms-grid-item-overlay">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    }                                                 
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- .entry-content -->
                        </article>
                        <!-- #post -->
                        <div id="comments" class="comments-area">
                        </div>
                        <!-- #comments .comments-area -->
                    </div>
                </div>
                <!-- #content -->
            </div>
            <!-- #primary -->
        </div>
    }
}

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    <script>
        $(document).ready(function () {
            $('#profile-tab').addClass("current-menu-item");
        });
    </script>
}
